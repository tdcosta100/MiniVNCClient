<Window x:Class="MiniVNCClient.WPFExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MiniVNCClient.WPFExample"
        mc:Ignorable="d"
        Title="MiniVNCClient"
        SizeToContent="WidthAndHeight">
    <Window.Resources>
        <Style x:Key="DisableIfConnecting" TargetType="Control">
            <Style.Setters>
                <Setter Property="IsEnabled" Value="True" />
            </Style.Setters>
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:MainWindow},Path=Connecting}" Value="True">
                    <Setter Property="IsEnabled" Value="False" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Window.Style>
        <Style TargetType="local:MainWindow">
            <Style.Setters>
                <Setter Property="Cursor" Value="Arrow" />
            </Style.Setters>
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=Self},Path=Connecting}" Value="True">
                    <Setter Property="Cursor" Value="Wait" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Style>
    <DockPanel>
        <DockPanel x:Name="ConnectionPanel" DockPanel.Dock="Top" Margin="10">
            <DockPanel.Style>
                <Style TargetType="DockPanel">
                    <Style.Setters>
                        <Setter Property="Visibility" Value="Visible" />
                    </Style.Setters>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:MainWindow},Path=Connected}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DockPanel.Style>
            <Button x:Name="ButtonConnect" DockPanel.Dock="Right" Width="100" Content="Connect" Click="Connect_Click" TabIndex="4" Style="{StaticResource DisableIfConnecting}" />
            <Label Content="Host:" DockPanel.Dock="Left" Padding="3" />
            <PasswordBox x:Name="PasswordBoxPassword" DockPanel.Dock="Right" Width="100" VerticalContentAlignment="Center" Margin="0,0,10,0" TabIndex="3" Style="{StaticResource DisableIfConnecting}"/>
            <Label Content="Password:" DockPanel.Dock="Right" Padding="3" />
            <TextBox x:Name="TextBoxPort" DockPanel.Dock="Right" Width="50" Text="5900" VerticalContentAlignment="Center" Margin="0,0,10,0" TabIndex="2" Style="{StaticResource DisableIfConnecting}" />
            <Label Content="Port:" DockPanel.Dock="Right" Padding="3" />
            <TextBox x:Name="TextBoxHost" MinWidth="150" VerticalContentAlignment="Center" Margin="0,0,10,0" TabIndex="1" Style="{StaticResource DisableIfConnecting}" />
        </DockPanel>
        <DockPanel x:Name="InfoPanel" DockPanel.Dock="Top" Margin="10">
            <DockPanel.Style>
                <Style TargetType="DockPanel">
                    <Style.Setters>
                        <Setter Property="Visibility" Value="Collapsed" />
                    </Style.Setters>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:MainWindow},Path=Connected}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DockPanel.Style>
            <Button DockPanel.Dock="Right" Width="100" Content="Disconnect" Click="Disconnect_Click" />
            <Label Content="Connected to:" Padding="3" />
            <Label x:Name="LabelHost" Content="Host" Padding="3" FontWeight="Bold" Margin="0,0,20,0" />
            <Label Content="Last encoding used:" Padding="3" />
            <Label x:Name="LabelEncoding" Content="Encoding" Padding="3" FontWeight="Bold"  />
        </DockPanel>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <Canvas x:Name="RemoteScreen" SnapsToDevicePixels="True" Cursor="None"
                Width="{Binding ElementName=RemoteFramebuffer,Path=ActualWidth}"
                Height="{Binding ElementName=RemoteFramebuffer,Path=ActualHeight}"
                KeyDown="RemoteKeyEvent"
                KeyUp="RemoteKeyEvent"
                MouseMove="RemoteMouseEvent"
                MouseDown="RemoteMouseEvent"
                MouseUp="RemoteMouseEvent"
                MouseWheel="RemoteMouseEvent">
                <Image x:Name="RemoteFramebuffer" Stretch="None" Focusable="True" />
                <Image x:Name="RemoteCursor" Stretch="None" Focusable="True" HorizontalAlignment="Left" VerticalAlignment="Top" />
            </Canvas>
        </ScrollViewer>
    </DockPanel>
</Window>
